<!DOCTYPE html>
<html>

  <head>

    <title>Primer reto</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://getbootstrap.com/docs/5.3/assets/css/docs.css" rel="stylesheet">
  </head>

  <body class="p-3 m-0 border-0 bd-example m-0 border-0">
    <h1 class="display-1">Calcula una propina justa</h1>
    <div class="col-4 position-relative ">
      <form class="row g-3 needs-validation form-inline " novalidate="" onsubmit="return validarFormulari(); propina(); ">

        <div>
          <label class="form-label" for="comensales">Cuantos somos?:</label>
          <input class="form-control" type="text" id="comensales" name="comensales">

        </div>



        <div>
          <label class="form-label" for="factura">Total Factura:</label>
          <input class="form-control" type="number" step="any" id="factura" name="factura" required>

        </div>


        <div>
          <label class="form-label my-1 mr-2" for="opinion">Opinion?</label>
          <select class="form-select custom-select my-1 mr-sm-2" aria-label="Default select example " name="opinion" id="opinion">
            <option value="10">Genial</option>
            <option value="5">Aceptable</option>
            <option value="0">Horrible</option>
          </select>




        </div>

        <input class="btn btn-info" type="submit" value="Calcular propina">
        <div>
          <div class="col-sm-10">
            <input type="text" readonly="" class="form-control-plaintext" id="staticEmail" value="Resultado Propina :">
          </div>
          <textarea class="form-control" id=propinaTotalp>

</textarea>


        </div>


      </form>





    </div>
    
    <script>

function validarFormulari() {

let comensales = document.getElementById("comensales").value;
let factura = document.getElementById("factura").value;
let opinion = document.getElementById("opinion").value;
let genial = 10;
let aceptable = 5;
let horrible = 0;

if (comensales === "") {
  comensales = 1;
}
// Realiza la validación programática de los datos
if (comensales === "" || factura === "" || opinion === "") {

  alert("RELLENA TODOS LOS CAMPOS MELÓN!");
  return false;
}

// Muestra una ventana de confirmación
let confirmacion = confirm("Los datos que has introducido son:\n\nComensales: " + comensales + "\nTotal Factura: " + factura + "\nOpinión: " + opinion + "\n\n¿Quieres continuar?");

if (confirmacion) {
  // Borra el contenido de los campos
  document.getElementById("comensales").value = "";
  document.getElementById("factura").value = "";
  document.getElementById("opinion").value = "";

  alert("Datos enviados correctamente!");
}
let propina;

if (opinion == 10) {
  propina = genial * factura / 100;
} else if (opinion == 5) {

  propina = aceptable * factura / 100;


} else if (opinion == 0) {
  propina = 0.5 * comensales;

}
let propinaMinima = comensales * 0.5;
if (propina < propinaMinima) {
  window.alert(" Se establecera la propina minima por persona , que es 0.5 euros por persona");
  propina = 0.5 * comensales;
}
//window.alert("La propina a pagar es " + propina + " euros");
var elemento = document.getElementById("propinaTotalp");
propinaTotalp.innerHTML = "La propina a pagar es " + propina + " euros";


return false;
}


    </script>
  
  </body>

</html>






